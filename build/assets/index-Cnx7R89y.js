import{Q as V,q as E,c as b,w as m,o as r,b as t,t as o,a as g,d as f,u as _,k as v,e as F,i as p,p as k,s as $,g as d,f as u,x as N,F as U,y}from"./app-0gpYHNfJ.js";import{_ as D}from"./AuthenticatedLayout-DpP4pYyG.js";import{_ as M}from"./Pagination-BcvtDB_E.js";import{S as h}from"./sweetalert2.esm.all-DwEdJQJv.js";const q={class:"pagetitle"},A={class:"breadcrumb"},j={class:"breadcrumb-item"},H={class:"breadcrumb-item active"},L={class:"section dashboard"},O={class:"card"},P={class:"card-body"},Q={class:"row filter_form"},Y={class:"col-md-2"},z=["placeholder"],G={class:"col-md-2"},I=["placeholder"],J={class:"col-md-2"},K={value:"",selected:"",disabled:""},R={value:1},W={value:0},X={class:"col-md-2"},Z={type:"submit",class:"btn btn-primary"},tt={class:"col-md-2"},et={class:"col-md-2"},st={class:"table-responsive"},ot={class:"table text-center"},nt={scope:"col"},at={scope:"col"},rt={scope:"col"},lt={scope:"col"},it={scope:"col"},ct={key:0,scope:"col"},dt={key:1,scope:"col"},ut={class:"text-center"},ht={scope:"row"},mt={class:"inline-flex items-center me-5 cursor-pointer"},ft=["checked","onChange"],bt={key:0},_t=["href"],vt={key:1},pt=["onClick"],wt={__name:"index",props:{customers:Object,translations:Array},setup(s){const l=s,x=V(),i=E({name:"",phone:"",is_active:""}),w=()=>{y.get(route("customers.index"),i,{preserveState:!0,preserveScroll:!0})},c=a=>x.props.auth_permissions.includes(a),C=a=>{h.fire({title:l.translations.are_your_sure,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#7066e0",confirmButtonText:l.translations.yes,cancelButtonText:l.translations.cancel}).then(e=>{e.isConfirmed&&y.post(`/customers/${a}/activate`,{onSuccess:()=>{h.fire("Updated!","Client status has been updated.","success")},onError:()=>{h.fire("Error!","There was an issue updating customer status.","error")}})})},B=a=>{h.fire({title:l.translations.are_your_sure,text:l.translations.You_will_not_be_able_to_revert_this,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:l.translations.yes,cancelButtonText:l.translations.cancel}).then(e=>{e.isConfirmed&&y.delete("customers/"+a,{onSuccess:()=>{h.fire({title:l.translations.data_deleted_successfully,icon:"success"})},onError:()=>{h.fire("Error!","There was an issue deleting the customer.","error")}})})};return(a,e)=>(r(),b(D,{translations:s.translations},{default:m(()=>[t("div",q,[t("h1",null,o(s.translations.customers),1),t("nav",null,[t("ol",A,[t("li",j,[g(_(v),{class:"nav-link",href:a.route("dashboard")},{default:m(()=>[f(o(s.translations.Home),1)]),_:1},8,["href"])]),t("li",H,o(s.translations.customers),1)])])]),t("section",L,[t("div",O,[e[10]||(e[10]=t("div",{class:"card-header"},[t("div",{class:"d-flex"})],-1)),t("div",P,[t("form",{onSubmit:F(w,["prevent"])},[t("div",Q,[t("div",Y,[p(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":e[0]||(e[0]=n=>i.name=n),placeholder:s.translations.name},null,8,z),[[k,i.name]])]),t("div",G,[p(t("input",{type:"text",class:"form-control search_box","onUpdate:modelValue":e[1]||(e[1]=n=>i.phone=n),placeholder:s.translations.phone},null,8,I),[[k,i.phone]])]),t("div",J,[p(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=n=>i.is_active=n)},[t("option",K,o(s.translations.status),1),t("option",R,o(s.translations.active),1),t("option",W,o(s.translations.not_active),1)],512),[[$,i.is_active]])]),t("div",X,[t("button",Z,[f(o(s.translations.search)+"   ",1),e[3]||(e[3]=t("i",{class:"bi bi-search"},null,-1))])]),t("div",tt,[c("read customers")?(r(),b(_(v),{key:0,class:"btn btn-success",href:a.route("export.customers")},{default:m(()=>[f(o(s.translations.export)+"   ",1),e[4]||(e[4]=t("i",{class:"bi bi-filetype-xls"},null,-1))]),_:1},8,["href"])):d("",!0)]),t("div",et,[c("create customer")?(r(),b(_(v),{key:0,class:"btn btn-primary",href:a.route("customers.create")},{default:m(()=>[f(o(s.translations.create)+"   ",1),e[5]||(e[5]=t("i",{class:"bi bi-plus-circle"},null,-1))]),_:1},8,["href"])):d("",!0)])])],32),t("div",st,[t("table",ot,[t("thead",null,[t("tr",null,[e[6]||(e[6]=t("th",{scope:"col"},"#",-1)),t("th",nt,o(s.translations.name),1),t("th",at,o(s.translations.phone),1),t("th",rt,o(s.translations.status),1),t("th",lt,o(s.translations.is_active),1),t("th",it,o(s.translations.last_purchase_date),1),c("update customer")?(r(),u("th",ct,o(s.translations.edit),1)):d("",!0),c("delete customer")?(r(),u("th",dt,o(s.translations.delete),1)):d("",!0)])]),t("tbody",ut,[(r(!0),u(U,null,N(s.customers.data,(n,S)=>(r(),u("tr",{key:n.id},[t("th",ht,o(S+1),1),t("td",null,o(n.name),1),t("td",null,o(n.phone),1),t("td",null,o(n.last_purchase_date),1),t("td",null,o(n.is_active==1?s.translations.active:s.translations.not_active),1),t("td",null,[t("div",null,[t("label",mt,[t("input",{type:"checkbox",class:"sr-only peer",checked:n.is_active==1,onChange:T=>C(n.id)},null,40,ft),e[7]||(e[7]=t("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"},null,-1))])])]),c("update customer")?(r(),u("td",bt,[t("a",{class:"btn btn-primary",href:a.route("customers.edit",{customer:n.id})},e[8]||(e[8]=[t("i",{class:"bi bi-pencil-square"},null,-1)]),8,_t)])):d("",!0),c("delete customer")?(r(),u("td",vt,[t("button",{type:"button",class:"btn btn-danger",onClick:T=>B(n.id)},e[9]||(e[9]=[t("i",{class:"bi bi-trash"},null,-1)]),8,pt)])):d("",!0)]))),128))])])])])]),g(M,{links:s.customers.links},null,8,["links"])])]),_:1},8,["translations"]))}};export{wt as default};
